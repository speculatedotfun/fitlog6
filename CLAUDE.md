להלן אפיון טכני ופונקציונלי מלא (PRD - Product Requirements Document) לאפליקציית ניהול אימונים אוניברסלית, המותאמת לצרכים הספציפיים שעלו מהמסמך שלך (מעקב RIR, טבלאות התקדמות, תזונה) אך בנויה בצורה גנרית שתתאים לכל מתאמן ומאמן.

שם הפרויקט (זמני): **Universal FitLog**

---

### 1. מטרת העל
יצירת פלטפורמה דו-צדדית (Web/Mobile):
1.  **צד מתאמן (Client App):** ממשק מובייל לביצוע אימון, תיעוד בזמן אמת, וניהול תזונה.
2.  **צד מאמן (Trainer Dashboard):** ממשק דסקטופ לבניית תוכניות, מעקב אחרי מתאמנים וקבלת דוחות אוטומטיים.

---

### 2. משתמשים וקהלי יעד
* **המתאמן (Trainee):** משתמש באפליקציה בחדר הכושר. צריך מהירות, פשטות וגישה לנתוני עבר.
* **המאמן (Trainer):** משתמש במערכת מהבית/משרד. צריך יכולת "מבט על", עריכת תוכניות מרחוק וניתוח נתונים.

---


### 3. אפיון פונקציונלי: צד מתאמן (Mobile Web / PWA)

#### א. מסך הבית (Dashboard)
* [cite_start]**סטטוס יומי:** הצגת האימון המתוכנן להיום (למשל: "A - רגליים") לפי הלוגיקה השבועית (A, B, C, A, B...)[cite: 47].
* [cite_start]**משקל גוף:** הזנה מהירה של משקל בוקר (דרישה קריטית למעקב)[cite: 58].
* **סיכום תזונה מהיר:** Progress Bar של חלבון/קלוריות יומי.

#### ב. מסך "ביצוע אימון" (Live Workout)
זהו הלב של המערכת. המסך נבנה דינמית לפי התוכנית שהוגדרה.
* **רשימת תרגילים:** מוצגת לפי סדר כרונולוגי.
* **כרטיסייה לכל תרגיל:**
    * **שם התרגיל + וידאו/תמונה:** (למשל: "סקוואט בסמיט").
    * [cite_start]**דגשים מיוחדים:** טקסט שמופיע בולט (למשל: "רוחב כתפיים, ברכיים נעולות") – נשלף מהדאטה בייס[cite: 34].
    * [cite_start]**טיימר מנוחה:** כפתור מהיר להפעלת טיימר (3-4 דקות למורכבים, 2-3 לפשוטים)[cite: 32].
* **טבלת סטים (Logging Grid):**
    * [cite_start]עמודות: סט #, משקל (ק"ג), חזרות, **RIR** (חובה לפי השיטה – רמת מאמץ 0-1)[cite: 26].
    * [cite_start]**השוואה היסטורית:** הצגת המשקל והחזרות מהאימון הקודם *באותו שורה* (Ghost Text) כדי לעודד Progressive Overload[cite: 30].
* [cite_start]**מחשבון פלטות:** פיצ'ר עזר לחישוב מהיר של אילו פלטות לשים על המוט (לפי בקשת המאמן להשתמש בפלטות קטנות של 1.25 ק"ג)[cite: 31].

#### ג. מחשבון המרות תזונה (Nutrition Swapper)
[cite_start]כלי עזר המבוסס על ההנחיות במסמך[cite: 15].
* **קלט:** המשתמש בוחר "מקור קיים" (למשל: אורז) ו"כמות" (350 גרם).
* **יעד:** המשתמש בוחר "מקור רצוי" (למשל: פסטה).
* **פלט:** המערכת מחשבת לפי המקדם (X0.8) ומציגה: "עליך לאכול 280 גרם פסטה".

---

### 4. אפיון פונקציונלי: צד מאמן (Trainer Dashboard)

#### א. בניית תוכניות (Plan Builder)
במקום לשלוח PDF, המאמן בונה את התוכנית במערכת:
* **מאגר תרגילים:** בחירה מתוך רשימה או הוספת תרגיל חדש.
* [cite_start]**הגדרת משתנים:** קביעת טווחי חזרות (למשל 6-10), מספר סטים, והוראות RIR לכל תרגיל[cite: 34, 36].
* [cite_start]**הוספת הערות:** שדה טקסט חופשי להוראות ביצוע (למשל: "מרפקים פנימה")[cite: 38].

#### ב. מרכז בקרה (Command Center)
* [cite_start]**התראות חריגה:** התראה אם מתאמן דילג על אימון או לא ביצע את המכסה השבועית (5 אימונים)[cite: 47].
* **צפייה בלוגים:** גישה להיסטוריית האימונים המלאה של כל מתאמן.

#### ג. דוחות אוטומטיים (Bi-Weekly Report)
[cite_start]החלפת הצורך במילוי ידני של הטבלה[cite: 58].
* המערכת מייצרת אוטומטית דו"ח כל שבועיים המציג:
    1.  שינוי במשקל גוף.
    2.  שינוי במשקלי עבודה בתרגילי הבסיס (Squat, Bench, Deadlift/Rows).
    3.  גרף התקדמות ויזואלי.

---

### 5. מודל נתונים (DB Schema) - לארכיטקטורה אוניברסלית

כדי שהמערכת תהיה אוניברסלית, מסד הנתונים צריך להיות בנוי כך:

1.  **`Users`**:
    * `id`, `email`, `role` ('trainer', 'trainee'), `trainer_id` (קישור למאמן).
2.  **`ExerciseLibrary`**:
    * `id`, `name`, `video_url`, `muscle_group`.
3.  **`WorkoutPlans`**:
    * `id`, `trainee_id`, `name` (למשל: "Almog Nov 2025"), `is_active`.
4.  **`Routines`**:
    * `id`, `plan_id`, `letter` ('A', 'B', 'C'), `name` (למשל: "Legs").
5.  **`RoutineExercises`** (החיבור בין תרגיל לאימון):
    * `id`, `routine_id`, `exercise_id`, `target_sets`, `target_reps`, `rir_target`, `notes` (הערות טקסט כמו "ברכיים נעולות").
6.  **`WorkoutLogs`** (התיעוד בפועל):
    * `id`, `user_id`, `date`, `routine_id`, `body_weight`.
7.  **`SetLogs`**:
    * `id`, `log_id`, `exercise_id`, `set_number`, `weight_kg`, `reps`, `rir_actual`.

---

### 6. תרחיש זרימה (User Flow) - דוגמה

1.  [cite_start]**הגדרת מאמן:** המאמן טל נכנס לדשבורד -> יוצר תוכנית חדשה לאלמוג -> מוסיף את אימון A -> מוסיף תרגיל "לחיצת חזה" עם הערה "מרפקים פנימה"[cite: 38].
2.  **לפני אימון:** אלמוג מקבל נוטיפיקציה. פותח את האפליקציה. [cite_start]רואה את ההערה על התזונה: "ארוחה ראשונה: שיבולת שועל וחלבון"[cite: 4].
3.  **באימון:** אלמוג בוחר אימון B. מגיע לתרגיל לחיצת חזה. המערכת מראה לו: "פעם קודמת עשית 80 ק"ג ל-8 חזרות".
4.  [cite_start]**ביצוע:** אלמוג מבצע 82.5 ק"ג (שימוש בפלטות קטנות להתקדמות)[cite: 31]. מזין את הנתון.
5.  **סיום:** אלמוג לוחץ "סיים אימון".
6.  **צד מאמן:** טל רואה בדשבורד שאלמוג סיים אימון B ועלה במשקלי העבודה.

---

### 7. טכנולוגיה מומלצת (Tech Stack)

* **Frontend:** Next.js (React) – מאפשר ביצועים מעולים גם במובייל וגם בדסקטופ.
* **UI Library:** Tailwind CSS + Shadcn/ui (לעיצוב נקי ומודרני של טבלאות וגרפים).
* **Backend & DB:** Supabase (מספק Database, משתמשים/Auth, ו-API מוכן מראש).
* **Hosting:** Vercel (חינמי ומהיר).

האם תרצה שאבנה לך את סכמת הנתונים (SQL) המדויקת ל-Supabase שתומכת במבנה הזה?